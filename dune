;; we start by ignoring node_modules. if you need to consume an OCaml
;; project from `node_modules`, this should work:
;; - remove the `dirs` stanza below
;; - add a `(subdir node_modules (dirs only_your_package))`

;; (dirs :standard \ node_modules)

(subdir
 node_modules
 ; (vendored_dirs @glennsl @rescript bs-fetch bs-webapi)
 ; (dirs @glennsl @rescript bs-fetch bs-webapi)
 (vendored_dirs @glennsl bs-fetch)
 (dirs @glennsl bs-fetch)
 (subdir
  @glennsl
  (subdir
   bs-json
   (subdir
    src
    (library
     (name bs_json)
     (wrapped false)
     (modes melange)))))
 (subdir
  bs-fetch
  (subdir
   src
   (library
    ; double underscore to not match the module Bs_fetch so that Fetch__Iterator is exposed
    (name bs__fetch)
    (wrapped false)
    (modes melange)))))
